<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Noob Framework</title>
    <link rel="stylesheet" href="./highlight.js/ajax_libs_highlight.js_10.7.1_styles_a11y-dark.min.css">
    <link rel="stylesheet" href="styles.css" type="text/css" />
    <script src="./highlight.js/ajax_libs_highlight.js_10.7.1_highlight.min.js"></script>
  </head>
  <body>
    <div class="container">
      <header>
        <h3>Simple and easy to use</h3>
        <span>A MVC framework in PHP for beginners</span>
      </header>
      <nav>
        <h3>Noob Framework</h3>
        <a href="#docs">Docs</a
        ><a href="https://github.com/edigar/noobframework" target="_blank"
          >Github</a
        >
      </nav>
      <main>
        <div class="background-filter"></div>
        <div class="content">
          <h1>The PHP framework<br />created to make your study of MVC easier.</h1>
          <a href="#docs">Documentation</a>
        </div>
      </main>
      <section>
        <h1 class="title" id="docs">Documentation</h1>
        <article>
          <div class="content-article installation">
            <h3>Installation</h3>
            <p>First of all, make sure you have installed PHP and Composer. Clone or download <a class='real-link' href="https://github.com/edigar/noobframework">project</a> and install dependencies (composer install).</p>
            <pre class="shell">
            <code>
composer install
            </code>
            </pre>
          </div>
        </article>
        <article>
          <div class="content-article">
            <h3>Routes</h3>
            <p>
              To create a route, in <em>route/router.php</em>, add your route within the rotas function, as shown in the example.
              Use the <code>$router</code> object, calling the method that corresponds to the HTTP verb you want to use.
              As parameters, you should pass the route and the controller along with the method you want to call.
              This framework uses the <a class="real-link" href="https://github.com/nikic/FastRoute">nikic/fast-route</a> library.
              Read its documentation for more information.
            </p>
            <br /><br />
            <div class="card">
              <span class="card-title">route -></span>
              <span class="red">Required</span>
              This parameter indicates the route that will be accessed by the user. The route must start with a slash (/).
            </div>
            <div class="card">
              <span class="card-title">action -> </span>
              <span class="red">Required </span>
              This parameter indicates the controller and method that will be called when the route is accessed.
              The controller and method must be separated by two colon (:).
            </div>
          </div>
          <div class="content-code">
            <div class="windows">
              <button id="route-code-window" class="focus">router.php</button>
            </div>
            <pre><code class="language-php">
&lt;?php

/*
|------------------------------------------------------------------------------------------------------
| Routes
|------------------------------------------------------------------------------------------------------
|
| Here is where you can register routes for your application.
| For more information see https://github.com/nikic/FastRoute
|
*/

function routes(FastRoute\RouteCollector $router): void
{
    $router->get('/', 'App\Controllers\IndexController::index');
    $router->get('/your-url', 'App\Controllers\YourController::yourMethod');
}
            </code></pre>
          </div>
        </article>
        <article>
          <div class="content-article">
            <h3>Controllers</h3>
            <p>
              You must extend Core/Controller in your controller class as in the example on the side. The class and
              method name (action) are the same you registered in <em>router.php</em>, and then, it will be called when
              the route is accessed.

              Your controller class will inherit the <code>view()</code> method, which is responsible for rendering a
              view. You can specify the view in the first parameter and pass data through the second parameter. Here is
              the description of the view method parameters:
              <br /><br />
              <div class="card">
                <span class="card-title">viewName -></span><span class="red">Required</span>
                This parameter indicates the name of the View that should be shown on the screen. The target file
                extension must be .html, .phtml or .php.
              </div>
              <div class="card">
                <span class="card-title">params -></span> <span class="green">Not required</span>
                This parameter receives the data that must be passed to be used in the View. The expected data type is a
                key-value array. Remembering that the name of the key in the array will be the same variable name in the
                View.
              </div>
            </p>
          </div>
          <div class="content-code controllers">
            <div class="windows">
              <button id="controller-code-window" class="focus" onclick="changeWindow('controllers', 'controller-code')">
                UserController.php
              </button>
              <button id="html-code-window" onclick="changeWindow('controllers', 'html-code')">
                home.html
              </button>
              <button id="preview-code-window" onclick="changeWindow('controllers', 'preview-code')">
                Preview
              </button>
            </div>
            <pre id="controller-code">
              <code class="language-php">
&lt;?php

namespace App\Controllers;

use Core\Controller;

class UserController extends Controller {

    public function signIn() {
        $params = [
            'user' => [
                'name' => 'John Doe',
                'email' => 'john.doe@domain.com',
            ]
        ];

        $this->view('home', $params);
    }
}
              </code>
            </pre>
            <pre id="html-code" class="invisible">
              <code class="language-php">
...
&lt;body>
  &lt;span>&lt;?php echo $user["name"] ?>&lt;/span>
  &lt;span>&lt;?php echo $user["email"] ?>&lt;/span>
&lt;\body>
...
              </code>
            </pre>
            <pre id="preview-code" class="invisible">
              <code>
John Doe
john.doe@domain.com
              </code>
            </pre>
          </div>
        </article>
        <article>
          <div class="content-article">
            <h3>Request</h3>
            <p>
              The Request class is a utility class that provides methods to access various information related to an
              HTTP request. It is designed to be injected into a controller action (method) to handle request-related tasks.
              That means all controllers have access to the Request class by parameters, therefore, just set the
              parameter in your controller method and use it, like the example below.
              <br /><br />
              <span class="obs">
                Note: Remember to adjust the usage according to your specific application needs. The Request class
                provides a convenient way to access request-related information within your controllers.
              </span>
            </p>
            <p>
              The Request class has the following methods:
              <br /><br />
              <div class="card">
                <span class="card-title">getParams(): array -> </span>Returns the entire array of request parameters.
              </div>
              <div class="card">
                <span class="card-title">method(): string -> </span>Returns the request method (e.g. GET, POST, PUT, PATCH).
              </div>
              <div class="card">
                <span class="card-title">isMethod(string $type): bool -> </span>
                Checks if the request method is equal to the parameter passed.
              </div>
              <div class="card">
                <span class="card-title">ip(): string -> </span>Retrieves the client’s IP address.
              </div>
              <div class="card">
                <span class="card-title">path(): string -> </span>Gets the request URI.
              </div>
              <div class="card">
                <span class="card-title">ssl(): bool -> </span>Determines if the request is using SSL.
              </div>
              <div class="card">
                <span class="card-title">fullPath(): string -> </span>Retrieves the full URL of the request.
              </div>
              <div class="card">
                <span class="card-title">var(string $inputName = null): mixed -> </span>Gets parameters from the URI.
              </div>
              <div class="card">
                <span class="card-title">query(string $inputName = null): mixed -> </span>Gets parameters from the querystring.
              </div>
              <div class="card">
                <span class="card-title">body(string $inputName = null, mixed $default = null): mixed -> </span>
                Gets parameters from the request body (for POST, PUT, and PATCH requests). <code>$default</code>
                parameter defines a default value if the parameter is not found.
              </div>
            </p>
          </div>
          <div class="content-code request">
            <div class="windows">
              <button id="request-code-window" class="focus">MyController.php</button>
            </div>
            <pre>
              <code class="language-php">
&lt;?php

namespace App\Controllers;

use Core\Controller;
use Core\Request;

class MyController
{
    public function handleRequest(Request $request)
    {
        // Example usage:
        $method = $request->method();
        $uri = $request->path();
        $queryParams = $request->query();
        $postParam = $request->body('postParam1', 'default');
        // ... other logic
    }
}
              </code>
            </pre>
          </div>
        </article>
        <article>
          <div class="content-article">
            <h3>Session</h3>
            <p>
              The Session class is a tool for managing PHP sessions. It encapsulates the session handling process in an
              object-oriented manner, providing a clean, intuitive and secure interface for session management. It
              follows the Singleton design pattern, meaning only one instance of this class can exist at a time. It
              provides methods to set and get session variables, set the session expiration time, and destroy the session.
            </p>
            <p>
              You can set a session variable setting this variable in the session instance like an attribute. The same is
              for recovering a session variable. For example, you can set a user session variable with
              <code>$session->user = $user</code>. See example below.
            </p>
            <p>
              The Session class has the following methods:
              <br /><br />
              <div class="card">
                <span class="card-title">getInstance(int $expire_time = null): Session -> </span>
                Returns the session instance. If an instance doesn’t exist, it creates one. The <code>$expire_time</code>
                parameter is optional and sets the session expiration time in seconds.
              </div>
              <div class="card">
                <span class="card-title">setExpiretime(int $__value = null): void -> </span>Sets the session expiration
                time in seconds.
              </div>
              <div class="card">
                <span class="card-title">getExpiretime(): int -> </span>Retrieves the session expiration time in seconds.
              </div>
              <div class="card">
                <span class="card-title">set(string $__name, $__value): void </span>Sets a session variable.
              </div>
              <div class="card">
                <span class="card-title">get(string $__name = null): mixed -> </span>Retrieves a session variable.
              </div>
              <div class="card">
                <span class="card-title">delete(string $name): void -> </span>Deletes a session variable.
              </div>
              <div class="card">
                <span class="card-title">destroy(): void -> </span>Destroys the session, removing all session variables.
              </div>
            </p>
          </div>
          <div class="content-code session">
            <div class="windows">
              <button id="auth-code-window" class="focus" onclick="changeWindow('session', 'auth-code')">
                AuthenticateController.php
              </button>
              <button id="session-code-window" onclick="changeWindow('session', 'session-code')">
                AnotherPageController.php
              </button>
            </div>
            <pre id="auth-code">
              <code class="language-php">
&lt;?php

namespace App\Controllers;

use Core\Controller;
use Core\Session;

class AuthenticateController extends Controller
{
    public function login()
    {
        // Get the Session instance
        $session = Session::getInstance();

        // Set a session variable
        $session->set('user', 'John Doe');
        $session->email = 'john.doe@example.com';

        // ... continue with the logic
    }

    public function logout()
    {
        // Get the Session instance
        $session = Session::getInstance();

        // Destroy session
        $session->destroy();

        // continue...
    }
}
              </code>
            </pre>
            <pre id="session-code" class="invisible">
              <code class="language-php">
&lt;?php

namespace App\Controllers;

use Core\Controller;
use Core\Session;

class AnotherPageController extends Controller
{
    public function show()
    {
        // Get the Session instance
        $session = Session::getInstance();

        // Get session variables
        $username = $session->username;
        $email = $session->get('email');

        // ... continue with the logic
    }
}
              </code>
            </pre>
          </div>
        </article>
        <article>
          <div class="content-article">
            <h3>Models and Database</h3>
            <p>
              You must create a <em>.env</em> file at the root of your project. You can copy the
              <em>.env.example</em> file and set the environment variables as shown in the example below.
            </p>
              <pre class="block">
                <code>
DRIVER=mysql
HOST=localhost
DBNAME=
DBUSER=
DBPASSWORD=
                </code>
              </pre>
            <p>
              Done! Configs ready! Now we can create our Model and connect to the database.

              <br /><br />
              In your model class, you can use Database class with <code>use Core\Database;</code>.
              It provides an interface for interacting with the database. This class follows the Singleton design pattern
              to ensure that only one instance of the database connection is created throughout the application, thereby
              saving resources.
            </p>
            <p>
              This class is useful in Models as it provides a structured and reusable way to interact with the database.
              It abstracts the complexity of database operations, making it easier to perform CRUD (Create, Read, Update, Delete)
              operations.
            </p>
            <p>
              Please note that the actual usage of this class may vary depending on the specific requirements of your
              application. Always ensure that you follow best practices for security and efficiency when interacting with
              a database.
            </p>
            <p>
              Let’s look at some methods below:<br /><br />
            </p>
            <div class="card">
              <span class="card-title">getInstance() -> </span>
              A static method that returns the single instance of the DataBase class. If the instance does not exist,
              it creates one and establishes a connection to the database.
            </div>
            <div class="card">
              <span class="card-title">
                getList(string $table, string $fields, array $condition = null, string $filter = null, string $order = null, string $limit = null): ?array ->
              </span>
              Retrieves data from the database based on the provided parameters and returns the result as an associative array.
            </div>
            <div class="card">
              <span class="card-title">insert(string $table, array $data): bool -> </span>
              Inserts the provided data into the specified table in the database. It returns true if the operation is
              successful, false otherwise.
            </div>
            <div class="card">
              <span class="card-title">update(string $table, array $data, array $condition): bool -> </span>
              Updates the specified table in the database with the provided data based on the given condition.
              It returns true if the operation is successful, false otherwise.
            </div>
            <div class="card">
              <span class="card-title">delete(string $table, array $condition): bool -> </span>
              Deletes data from the specified table in the database based on the given condition. It returns true if the
              operation is successful, false otherwise.
            </div>
          </div>
          <div class="content-code models">
            <div class="windows">
              <button id="user-code-window" class="focus" onclick="changeWindow('models', 'user-code')">
                User.php
              </button>
              <button id="session-model-code-window" onclick="changeWindow('models', 'session-model-code')">
                UserController.php
              </button>
            </div>
            <pre id="user-code">
              <code class="language-php">
&lt;?php

namespace App\Models;

use Core\Database;

class User {
    private table = 'users';

    public function find($columns = '*', $conditions = null) {
        $db = Database::getInstance();

        $data = $db->getList($this->table, $columns, $conditions);

        return $data;
    }
}
              </code>
            </pre>
            <pre id="session-model-code" class="invisible">
              <code class="language-php">
&lt;?php

namespace App\Controllers;

use Core\Controller;
use App\Models\User;

class UserController extends Controller {
    public function getUser() {
        $email = 'john.doe@domain.com';
        $user = new User();
        $targetUser = $user->find(null, 'email = ' . $email);

        $this->view('home', ['user' => $targetUser]);
    }
}
              </code>
            </pre>
          </div>
        </article>
      </section>
      <footer>
        <div class="footer-half">
          <span>Contributors:</span>
          <ul>
            <li><a href="https://github.com/MaxwellOlliver">Maxwell Olliver</a></li>
            <li><a href="https://github.com/edigar">Edigar Herculano</a></li>
          </ul>
        </div>
        <div class="footer-half">
          <h3 class="logo-dancing">Noob Framework</h3>
        </div>
      </footer>
    </div>

    <script>
      hljs.highlightAll();
      function changeWindow(context, button) {
        let windowsButtons = document.querySelectorAll('.' + context + ' div button');
        windowsButtons.forEach(button => {
          button.classList.remove('focus');
        });
        let clickedButton = document.querySelector(`#${button}` + '-window');
        clickedButton.classList.add('focus');

        let codePreElements = document.querySelectorAll('.' + context + ' pre');
        codePreElements.forEach(pre => {
          pre.classList.add('invisible');
        });
        let clickedPre = document.querySelector(`#${button}`);
        clickedPre.classList.remove('invisible');
      }
    </script>
  </body>
</html>
