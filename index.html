<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Noob Framework</title>
    <link rel="stylesheet" href="./highlight.js/ajax_libs_highlight.js_10.7.1_styles_a11y-dark.min.css">
    <link rel="stylesheet" href="styles.css" type="text/css" />
    <script src="./highlight.js/ajax_libs_highlight.js_10.7.1_highlight.min.js"></script>
  </head>
  <body>
    <div class="container">
      <header>
        <h3>Simple and easy to use</h3>
        <span>A MVC framework in PHP for beginners</span>
      </header>
      <nav>
        <h3>Noob Framework</h3>
        <a href="#docs">Docs</a
        ><a href="https://github.com/edigar/noobframework" target="_blank"
          >Github</a
        >
      </nav>
      <main>
        <div class="background-filter"></div>
        <div class="content">
          <h1>The PHP framework<br />created to make your study of MVC easier.</h1>
          <a href="#docs">Documentation</a>
        </div>
      </main>
      <section>
        <h1 class="title" id="docs">Documentation</h1>
        <article>
          <div class="content-article installation">
            <h3>Installation</h3>
            <p>First of all, make sure you have installed PHP and Composer. Clone or download <a class='real-link' href="https://github.com/edigar/noobframework">project</a> and install dependencies (composer install).</p>
            <pre class="shell">
            <code>
composer install
            </code>
            </pre>
          </div>
        </article>
        <article>
          <div class="content-article">
            <h3>Routes</h3>
            <p>
              To create a route, in <em>route/router.php</em>, add your route within the rotas function, as shown in the example.
              Use the <code>$router</code> object, calling the method that corresponds to the HTTP verb you want to use.
              As parameters, you should pass the route and the controller along with the method you want to call.
              This framework uses the <a class="real-link" href="https://github.com/nikic/FastRoute">nikic/fast-route</a> library.
              Read its documentation for more information.
            </p>
            <br /><br />
            <div class="card">
              <span class="card-title">route -></span>
              <span class="red">Required</span> This parameter indicates the route that will be accessed by the user. The route must start with a slash (/).
            </div>
            <div class="card">
              <span class="card-title">action -></span>
              <span class="red">Required</span> This parameter indicates the controller and method that will be called when the route is accessed. The controller and method must be separated by two colon (:).
            </div>
          </div>
          <div class="content-code">
            <div class="windows">
              <button id="route-code-window" class="focus">router.php</button>
            </div>
            <pre><code class="language-php">
&lt;?php

/*
|------------------------------------------------------------------------------------------------------
| Routes
|------------------------------------------------------------------------------------------------------
|
| Here is where you can register routes for your application.
| For more information see https://github.com/nikic/FastRoute
|
*/

function routes(FastRoute\RouteCollector $router): void
{
    $router->get('/', 'App\Controllers\IndexController::index');
    $router->get('/your-url', 'App\Controllers\YourController::yourMethod');
}
            </code></pre>
          </div>
        </article>
        <article>
          <div class="content-article">
            <h3>Controllers</h3>
            <p>
              You must extend Core/Controller in your controller class as in the example on the side. The class and
              method name (action) are the same you registered in <em>router.php</em>, and then, it will be called when
              the route is accessed.

              Your controller class will inherit the <code>view()</code> method, which is responsible for rendering a view.
              You can specify the view in the first parameter and pass data through the second parameter. Here is the
              description of the view method parameters:
              <br /><br />
              <div class="card">
                <span class="card-title">viewName -></span><span class="red">Required</span>
                This parameter indicates the name of the View that should be shown on the screen. The target file
                extension must be .html, .phtml or .php.
              </div>
              <div class="card">
                <span class="card-title">params -></span> <span class="green">Not required</span>
                This parameter receives the data that must be passed to be used in the View. The expected data type is a
                key-value array. Remembering that the name of the key in the array will be the same variable name in the View.
              </div>
            </p>
          </div>
          <div class="content-code controllers">
            <div class="windows">
              <button id="controller-code-window" class="focus" onclick="changeWindow('controllers', 'controller-code')">
                UserController.php
              </button>
              <button id="html-code-window" onclick="changeWindow('controllers', 'html-code')">
                home.html
              </button>
              <button id="preview-code-window" onclick="changeWindow('controllers', 'preview-code')">
                Preview
              </button>
            </div>
            <pre id="controller-code">
              <code class="language-php">
&lt;?php

namespace App\Controllers;

use Core\Controller;

class UserController extends Controller {

  public function signIn() {
    $params = [
      'user' => [
        'name' => 'John Doe',
        'email' => 'john.doe@domain.com',
      ]
    ];

    $this->view('home', $params);
  }
}
              </code>
            </pre>
            <pre id="html-code" class="invisible">
              <code class="language-php">
...
&lt;body>
  &lt;span>&lt;?php echo $user["name"] ?>&lt;/span>
  &lt;span>&lt;?php echo $user["email"] ?>&lt;/span>
&lt;\body>
...
              </code>
            </pre>
            <pre id="preview-code" class="invisible">
              <code>
John Doe
john.doe@domain.com
              </code>
            </pre>
          </div>
        </article>
        <article>
          <div class="content-article">
            <h3>Models and Database</h3>
            <p>
              You need to create a <em>.env</em> file at the root of your project. You can copy the
              <em>.env.example</em> file and set the environment variables as shown in the example below.
            </p>
              <pre class="block">
                <code>
DRIVER=mysql
HOST=localhost
DBNAME=
DBUSER=
DBPASSWORD=
                </code>
              </pre>
            <p>
              Done! Configs ready! Now we can create our Model and connect to the database.

              <br /><br />

              To create a model, you must extend the Database class with <code>use Core\Database;</code>.
              With this, your model will inherit some methods that will facilitate access to the database.
              Letâ€™s look at some methods below:<br /><br />
            </p>
            <div class="card">
              <span class="card-title">getInstance() -></span> Return a database instance.
            </div>
            <div class="card">
              <span class="card-title">getList(table, columns, conditions) -></span>
              Searches information in the database according to the conditions informed.
            </div>
            <div class="card">
              <span class="card-title">insert(table, data) -></span>
              Inserts the data informed in the table passed in the parameter.
            </div>
            <div class="card">
              <span class="card-title">update(table, data, conditions) -></span>
              Update many or one value according to the conditions informed.
            </div>
            <div class="card">
              <span class="card-title">delete(table, conditions) -></span>
              Delete many or one value according to the conditions informed
            </div>
          </div>
          <div class="content-code models">
            <div class="windows">
              <button id="user-code-window" class="focus" onclick="changeWindow('models', 'user-code')">
                User.php
              </button>
              <button id="session-model-code-window" onclick="changeWindow('models', 'session-model-code')">
                UserController.php
              </button>
            </div>
            <pre id="user-code">
              <code class="language-php">
&lt;?php

namespace App\Models;

use Core\Database;

class User {
  private table = 'users';

  public function find($columns = '*', $conditions = null) {
    $db = Database::getInstance();

    $data = $db->getList($this->table, $columns, $conditions);

    return $data;
  }
}
              </code>
            </pre>
            <pre id="session-model-code" class="invisible">
              <code class="language-php">
&lt;?php

namespace App\Controllers;

use Core\Controller;
use App\Models\User;

class UserController extends Controller {
  public function getUser() {
    $email = 'john.doe@domain.com';
    $user = new User();
    $targetUser = $user->find(null, 'email = ' . $email);

    $this->view('home', ['user' => $targetUser]);
  }
}
              </code>
            </pre>
          </div>
        </article>
      </section>
      <footer>
        <div class="footer-half">
          <span>Contributors:</span>
          <ul>
            <li><a href="https://github.com/MaxwellOlliver">Maxwell Olliver</a></li>
            <li><a href="https://github.com/edigar">Edigar Herculano</a></li>
          </ul>
        </div>
        <div class="footer-half">
          <h3 class="logo-dancing">Noob Framework</h3>
        </div>
      </footer>
    </div>

    <script>
      hljs.highlightAll();
      function changeWindow(context, button) {
        let windowsButtons = document.querySelectorAll('.' + context + ' div button');
        windowsButtons.forEach(button => {
          button.classList.remove('focus');
        });
        let clickedButton = document.querySelector(`#${button}` + '-window');
        clickedButton.classList.add('focus');

        let codePreElements = document.querySelectorAll('.' + context + ' pre');
        codePreElements.forEach(pre => {
          pre.classList.add('invisible');
        });
        let clickedPre = document.querySelector(`#${button}`);
        clickedPre.classList.remove('invisible');
      }
    </script>
  </body>
</html>
